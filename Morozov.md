# Курсовая работа

**Тема:** База данных агентства по аренде квартир.

**Студент:** Морозов Николай Константинович.

**Группа:** 414.

# Содержание

- [Введение](#введение)
- [Анализ предметной области](#анализ-предметной-области)
- [Инфологическая модель базы данных](#инфологическая-модель-базы-данных)
- [Логическая структура базы данных](#логическая-структура-базы-данных)
- [Физическая структура базы данных](#физическая-структура-базы-данных)
- [Реализация проекта в СУБД](#реализация-проекта-в-субд)
- [Заключение](#заключение)
- [Список использованных источников](#список-использованных-источников)


# Введение

## Актуальность
В условиях современного города спрос на аренду недвижимости неуклонно растет, особенно в густонаселенных мегаполисах, а также в университетских и студенческих городах. Этот спрос обусловлен множеством факторов, включая экономические, социальные и демографические изменения. Урбанизация, высокая мобильность населения, стремительный рост стоимости жилья и потребность в гибком варианте проживания делают аренду более привлекательной, особенно для молодежи и приезжих специалистов. Рынок аренды недвижимости становится всё более насыщенным и разнообразным, так как клиенты ожидают широкого выбора квартир и гибких условий аренды. В ответ на растущие требования клиентов, агентства по аренде квартир должны оперативно обрабатывать и анализировать огромные объемы данных, касающихся характеристик квартир, профилей клиентов, условий аренды и многих других параметров. 

Сегодня базы данных играют решающую роль в организации работы агентств по аренде недвижимости. С их помощью можно структурировать и хранить большие объемы информации, что облегчает управление данными и упрощает процесс принятия решений. Для агентств внедрение современных баз данных позволяет автоматизировать рутинные операции, такие как учет информации о жилье, учёт запросов клиентов и анализ текущих тенденций на рынке. Это не только значительно повышает скорость работы агентства, но и позволяет улучшить качество сервиса, предоставляемого клиентам. Базы данных также помогают уменьшить вероятность ошибок, возникающих при ручной обработке данных, что делает работу агентства более прозрачной и надёжной. Важно отметить, что эффективная работа с базой данных не только повышает продуктивность агентства, но и улучшает клиентский опыт, поскольку клиенты могут быстрее находить жилье, которое соответствует их запросам. Это способствует повышению удовлетворенности клиентов, их лояльности и долгосрочной привязанности к услугам агентства.

Таким образом, создание и внедрение базы данных для агентства по аренде недвижимости является важной задачей, позволяющей повысить производительность работы, улучшить качество сервиса и обеспечить конкурентоспособность на рынке. Автоматизация процессов на базе данных помогает агентствам быстро и эффективно управлять своими ресурсами, обеспечивая актуальность и достоверность информации, что является необходимым условием для успешного ведения бизнеса в условиях современной городской жизни.

## Цель
Целью данной работы является создание базы данных для агентства по аренде квартир, которая позволит эффективно организовать и структурировать хранение информации о клиентах, квартирах, договорах аренды и сотрудниках. Данная база данных должна стать основным инструментом для автоматизации процессов, связанных с арендой жилья, обеспечивая агентству возможность быстрее и точнее обрабатывать запросы клиентов и отслеживать взаимодействие между клиентами и агентами. Кроме того, база данных призвана упростить управление информацией, обеспечивая легкий доступ к актуальным данным, что позволит повысить оперативность и надежность обслуживания.

Эта база данных должна не только поддерживать внутренние процессы агентства, но и предоставлять аналитические возможности для мониторинга и оценки эффективности работы агентства. Например, база данных должна быть способна отслеживать наиболее востребованные типы квартир, анализировать динамику аренды по различным параметрам (районы, сезоны, длительность аренды и т.д.) и генерировать отчеты для принятия обоснованных решений. Таким образом, цель разработки базы данных заключается в создании комплексного инструмента, который обеспечит агентству по аренде квартир высокую производительность, улучшит качество клиентского сервиса и позволит лучше адаптироваться к изменениям на рынке аренды жилья.

## Задачи
Для достижения поставленной цели необходимо выполнить следующие задачи:

1. Провести детальный анализ требований к базе данных для агентства по аренде квартир. Определить ключевые процессы, нуждающиеся в автоматизации, а также необходимые категории данных, включая информацию о клиентах, квартирах, договорах аренды, характеристиках жилья, условиях оплаты, а также о персонале агентства. Учитывая специфику рынка аренды, провести исследование, которое позволит выявить важные данные для повышения конкурентоспособности агентства.

2. Разработать структуру базы данных, включающую продуманную схему таблиц и связей между ними, которые будут поддерживать хранение и обработку информации обо всех аспектах аренды. Включить таблицы для данных о клиентах, квартирах, характеристиках объектов, условиях аренды, а также таблицы для учета истории аренды и предпочтений клиентов. Важно учесть возможность расширения базы данных для добавления новых категорий данных при изменении потребностей агентства или появлении новых сервисов.

3. Реализовать таблицы, настроить связи между ними и внедрить необходимые ограничения для обеспечения целостности данных. Установить связи между таблицами так, чтобы база данных поддерживала эффективное управление всеми аспектами аренды жилья. Реализация должна включать проверку данных, поддержку транзакций для предотвращения ошибок, а также тестирование функциональных возможностей для всех категорий пользователей.



 ## 1. Анализ предметной области. Постановка задачи

### 1.1. Описание предметной области и функции решаемых задач
Предметной областью данной базы данных является управление процессом аренды квартир в агентстве недвижимости, которое оказывает комплексные услуги по аренде и сопровождению сделок. Эта сфера деятельности предполагает большой объем разнообразных операций, связанных с систематизацией, хранением и обработкой данных о недвижимости, арендаторах, потенциальных клиентах и заключаемых договорах аренды. Аренда недвижимости — процесс, который требует точности и надежности на каждом этапе, поскольку он включает работу с большими объемами информации, управленческими решениями и важными документами, регулирующими права и обязанности сторон. Система управления базой данных в данном контексте направлена на автоматизацию, стандартизацию и оптимизацию основных процессов агентства, что позволяет сократить затраты времени и повысить качество обслуживания клиентов, создавая удобные условия для взаимодействия с арендодателями и арендаторами.

Ключевой задачей данной системы является **регистрация и хранение информации** обо всех участниках и объектах процесса аренды: о клиентах, сотрудниках, квартирах и условиях договоров аренды. Регистрация данных о клиентах включает не только базовую информацию, такую как имя и контактные данные, но и расширенные сведения, включая историю предыдущих обращений, их запросы, предпочтения по жилью, финансовые возможности, а также потенциальные скидки и льготы, предоставленные клиенту. Такой подход позволяет создавать полное досье на каждого клиента, что помогает сотрудникам агентства лучше понимать потребности каждого арендатора, быстрее обрабатывать запросы и предлагать индивидуальные условия. В отношении сотрудников, система сохраняет сведения о персонале агентства, включая их должностные обязанности, уровень доступа к данным и функции, что помогает четко разграничивать права доступа к информации и улучшает безопасность и конфиденциальность данных. Кроме того, база данных содержит расширенную информацию о каждой квартире: адрес, площадь, количество комнат, состояние ремонта, наличие мебели и бытовой техники, этаж, ориентировка окон, а также стоимость аренды и статус, свободна ли квартира для аренды или уже сдана другому клиенту. 

Использование такой системы управления данными позволяет агентству более эффективно организовать работу по подбору жилья для каждого клиента и сопровождению арендных сделок. Сотрудники могут быстро найти подходящие объекты в базе, опираясь на требования клиента, такие как желаемое количество комнат, диапазон цен, удобное местоположение и предпочтительные характеристики квартиры. Поддержка таких функций позволяет агентству оперативно реагировать на запросы клиентов и предлагать актуальные варианты, что положительно сказывается на уровне удовлетворенности клиентов и помогает агентству поддерживать свою репутацию надежного партнера. 

Кроме того, система облегчает не только подбор и предложение жилья, но и все сопутствующие задачи, связанные с **подготовкой и заключением договоров аренды**. Система позволяет автоматически формировать и сохранять шаблоны договоров, где прописаны условия аренды, права и обязанности сторон, а также сроки и суммы платежей. Это позволяет сотрудникам не тратить время на повторное создание документов и сократить вероятность ошибок, связанных с ручным вводом данных. Благодаря этому агентство может поддерживать высокую скорость обработки документов, что упрощает и ускоряет процесс оформления аренды.

Система управления также облегчает процесс **взаимодействия между агентами и клиентами**, поддерживая функцию отслеживания статуса каждого запроса или заявки. Это значит, что агенты могут видеть, на какой стадии находится заявка клиента — от первичного запроса до подписания договора. Функция обновления статуса позволяет всем сотрудникам агентства в реальном времени получать актуальную информацию о каждом объекте и клиенте. Дополнительно система позволяет вести учет завершенных арендных сделок и организовывать работу с постоянными клиентами, фиксируя особенности их запросов, пожелания и предпочтения, что помогает агентству строить более долгосрочные отношения с клиентами и удерживать их лояльность.

Важной функцией системы является **сбор и анализ данных о всех аспектах арендной деятельности** агентства. Система позволяет формировать статистические отчеты по различным критериям, например, по средней стоимости аренды, востребованности квартир определенного типа или района, загруженности сотрудников и другим показателям. Такие данные помогают агентству оценивать текущие тенденции на рынке, разрабатывать стратегию продаж, а также проводить анализ эффективности работы сотрудников. Например, система может генерировать отчеты по каждой сделке и сотруднику, показывая, какие объекты чаще всего выбирают клиенты, какие параметры квартир наиболее востребованы, как быстро заключаются сделки и насколько качественно обслуживаются клиенты. Эти данные могут использоваться для корректировки стратегий агентства, для улучшения маркетинговой деятельности и оптимизации работы сотрудников.

Использование базы данных значительно упрощает все основные процессы в агентстве, от регистрации и хранения информации до выполнения аналитических и управленческих функций. Автоматизация этих процессов снижает вероятность ошибок, повышает качество обслуживания клиентов, ускоряет взаимодействие сотрудников агентства с клиентами и улучшает прозрачность работы агентства.



### 1.2. Перечень входных данных
Для функционирования системы необходима регистрация следующих данных:

- **Данные клиентов**: включают полные имена клиентов, их контактную информацию (телефон, адрес электронной почты) и другие персональные данные, необходимые для связи и обслуживания.
- **Данные квартир**: содержат адрес объекта, количество комнат, площадь квартиры, стоимость аренды, текущее состояние (например, доступна для аренды или занята), а также дополнительные характеристики, такие как тип ремонта, наличие мебели, этаж и вид из окон.
- **Данные сотрудников**: включают фамилию, имя и отчество сотрудников, занимаемую должность, права доступа к различным данным в системе, а также контактные данные для внутреннего пользования.
- **Данные по аренде**: это информация о заключённых арендных сделках, в частности, данные клиента, конкретная квартира, срок аренды, стоимость аренды, а также условия и статус договора (например, подписан, активен, завершён).

Эти данные используются для поддержки процессов управления, анализа и создания отчетности, а также обеспечения безопасности хранения информации.

### 1.3. Перечень выходных данных

Система формирует обширный перечень выходных данных, который помогает агентству управлять процессами и улучшать клиентский сервис. Основные выходные данные включают:

- **Список доступных квартир**: обновляется в реальном времени и предоставляет информацию о текущих объектах недвижимости, доступных для аренды, с учётом их характеристик, цен и условий. Это позволяет агентству быстро реагировать на запросы клиентов, предлагать актуальные варианты квартир и минимизировать время обработки заявок.

- **История арендных сделок**: содержит подробную запись о всех завершённых и активных арендных сделках, в том числе сведения о каждом заключенном договоре, условиях аренды, сроках, а также историю взаимодействия клиента с агентством. Такая информация помогает агентству отслеживать предпочтения клиентов, анализировать долгосрочные тенденции на рынке аренды и оценивать эффективность сделок.

- **Статистика по аренде**: система предоставляет сводные данные по всем заключённым договорам, суммам арендных платежей, средней стоимости и срокам аренды, а также загрузке объектов в различные периоды. Эти показатели позволяют руководству агентства принимать обоснованные решения и разрабатывать стратегии, учитывающие потребности клиентов и особенности рынка.

### 1.4. Ограничения предметной области

Для корректного функционирования системы необходимо учитывать ряд важных ограничений, которые помогают поддерживать качество данных и соблюдение нормативных требований:

- **Аренда доступна только для свободных квартир**: система обеспечивает строгий контроль статуса всех объектов недвижимости, предотвращая возможность сдачи уже арендованных квартир. Это требование гарантирует актуальность данных и предотвращает возможные конфликты интересов при заключении договоров с несколькими клиентами одновременно.

- **Ограничение доступа к данным сотрудников**: для соблюдения политики конфиденциальности система ограничивает доступ к данным сотрудников агентства, предоставляя их только авторизованным лицам. Доступ к информации регулируется уровнем прав доступа, что помогает минимизировать риски утечки данных и нарушение норм безопасности.

- **Сроки аренды регулируются условиями договоров**: система учитывает, что сроки аренды могут варьироваться в зависимости от условий договора, поэтому предотвращает автоматическое продление аренды сверх предусмотренных сроков, если это не согласовано заранее. Система также контролирует соответствие сроков договора установленным правилам и нормам, что помогает агентству избежать нарушения договорных обязательств и минимизировать риски конфликтных ситуаций.



## 2. Инфологическая (концептуальная) модель базы данных

Инфологическая модель базы данных определяет основные объекты системы, атрибуты этих объектов и связи между ними, отражая ключевые аспекты процесса аренды недвижимости в агентстве. Эта модель закладывает основу для построения всей структуры базы данных, обеспечивая целостность и четкую организацию данных, необходимых для эффективной работы агентства по аренде квартир.

### 2.1. Выделение информационных объектов

В системе аренды недвижимости основными информационными объектами, которые участвуют в процессе, являются:

- **Клиенты**: это физические лица, которые обращаются в агентство для поиска подходящего жилья. Клиенты играют центральную роль в системе, так как все действия и операции направлены на удовлетворение их потребностей. Информация о клиентах является ключевой для заключения договоров и последующего взаимодействия, поэтому система должна обеспечивать доступ к их персональным и контактным данным, истории взаимодействий с агентством и предпочтениям. Клиенты могут быть постоянными, возвращаясь к услугам агентства, что требует дополнительной информации для построения долгосрочных отношений.

- **Квартиры**: объекты недвижимости, которые предлагаются агентством в аренду. Квартиры обладают множеством уникальных характеристик, которые важны для принятия клиентами решения о выборе объекта. Эти характеристики включают количество комнат, площадь, адрес, этаж, стоимость аренды, а также статус, доступен ли объект для аренды или уже сдан. Информация о квартирах позволяет агентству предлагать клиентам жилье, наиболее соответствующее их запросам. Система должна поддерживать историю всех сделок, связанных с квартирой, чтобы отслеживать ее занятость и доходность.

- **Аренда**: это ключевой объект, представляющий собой отношение между клиентом и квартирой, которое фиксирует условия и параметры аренды. Объект «Аренда» описывает важные аспекты сделки, такие как срок аренды, стоимость, права и обязанности сторон. Каждая арендная сделка должна быть зарегистрирована с привязкой к конкретному клиенту и конкретной квартире, чтобы система могла вести учет всех арендных операций, уплаченных сумм, а также отслеживать сроки и договорные условия. Данные по аренде помогают в учете финансовых операций и оценке эффективности работы агентства.

- **Сотрудники**: это представители агентства, которые отвечают за взаимодействие с клиентами и управление процессом аренды. Сотрудники выполняют широкий спектр функций, начиная от обработки запросов и подбора квартир до заключения договоров и сопровождения сделок. В базе данных фиксируются данные о сотрудниках, такие как имена, должности и права доступа, что позволяет системе поддерживать разграничение полномочий и защиту информации. Сотрудники могут быть назначены к определенным арендным сделкам, и это назначение помогает организовать работу агентства и контролировать выполнение задач.

### 2.2. Определение атрибутов объектов

Каждому из выделенных информационных объектов присваиваются атрибуты, которые описывают уникальные характеристики и функциональные данные, необходимые для работы системы:

- **Клиенты**:
  - `ID клиента` — уникальный идентификатор, обеспечивающий однозначную идентификацию каждого клиента.
  - `Имя` и `Фамилия` — персональные данные клиента, позволяющие идентифицировать его в системе.
  - `Email` и `Телефон` — контактные данные, используемые для связи и уведомлений, а также для рассылки информации о доступных объектах

- **Квартиры**:
  - `ID квартиры` — уникальный идентификатор объекта недвижимости в базе данных.
  - `Адрес` — местоположение квартиры, включая улицу, номер дома и квартиры.
  - `Количество комнат` — число комнат в квартире, один из основных параметров при выборе жилья.
  - `Площадь` — общая жилая площадь квартиры в квадратных метрах.
  - `Цена` — стоимость аренды, которая может изменяться в зависимости от спроса.
  - `Этаж` — этаж расположения квартиры, что также может влиять на стоимость и привлекательность.
  - `Доступность` — статус квартиры, показывающий, свободна ли она для аренды на данный момент.
  - `Дата добавления` — дата, когда квартира была внесена в базу данных агентства.

- **Аренда**:
  - `ID аренды` — уникальный идентификатор арендной сделки.
  - `ID клиента` — ссылка на клиента, заключившего договор аренды, обеспечивающая связь аренды с клиентом.
  - `ID квартиры` — ссылка на квартиру, сдаваемую в аренду, что помогает вести учет занятости объектов.
  - `Дата начала` и `Дата окончания` — временные рамки действия договора, используемые для расчетов и учета занятости.
  - `Цена аренды` — стоимость аренды за весь период, указанный в договоре.
  - `Статус договора` — текущий статус аренды (активен, завершен, аннулирован).

- **Сотрудники**:
  - `ID сотрудника` — уникальный идентификатор, который позволяет системе различать сотрудников.
  - `Имя` и `Фамилия` — персональные данные, которые используются для идентификации.
  - `Должность` — позиция сотрудника в агентстве, от которой могут зависеть права и обязанности.
  - `Дата найма` — дата, когда сотрудник начал работать в агентстве, что позволяет отслеживать его опыт

### 2.3. Определение отношений и мощности отношений между объектами

Для полноценного описания всех процессов аренды требуется установить связи между объектами, которые определяют их взаимодействие:

- **Клиенты - Аренда**:
  - Один клиент может заключать несколько договоров аренды, как при одновременной аренде нескольких объектов, так и в случае долгосрочного сотрудничества с агентством.
  - Каждый договор аренды, в свою очередь, связан только с одним клиентом, что позволяет четко фиксировать отношения.
  - Мощность отношения «Клиенты - Аренда» составляет 1:N.

- **Квартиры - Аренда**:
  - Одна и та же квартира может быть арендована разными клиентами последовательно, что важно для учета истории аренды.
  - Каждый договор аренды привязан только к одной квартире, что упрощает учет занятости.
  - Мощность отношения «Квартиры - Аренда» также составляет 1:N.

- **Сотрудники - Аренда**:
  - Сотрудник агентства может курировать несколько арендных сделок одновременно, выполняя свои должностные обязанности.
  - Каждый договор аренды связан с конкретным сотрудником, который отвечает за сопровождение сделки.
  - Мощность отношения «Сотрудники - Аренда» составляет 1:N.

Эти связи, а также определенные мощности отношений помогают описать структуру данных и взаимодействие между информационными объектами в системе, поддерживая реализацию всех функциональных задач, от учета и поиска данных до анализа и создания отчетности для агентства.



### 2.4. Построение концептуальной модели
![Фото](1.png)


## 3. Логическая структура базы данных

Логическая структура базы данных описывает организацию данных и их взаимосвязи в рамках бизнес-логики и требований системы. Она определяет, каким образом данные группируются, а также их отношения, которые необходимы для выполнения операций и обеспечения эффективной работы агентства.

1. **Таблица `Clients`**. Таблица `Clients` хранит информацию о клиентах, с которыми агентство взаимодействует в процессе аренды. В ней содержится уникальный идентификатор клиента (`client_id`), а также личные данные, включая имя, фамилию, адрес электронной почты и номер телефона. В некоторых случаях могут добавляться дополнительные поля, такие как дата регистрации клиента, его предпочтения по арендуемому жилью (например, минимальные и максимальные площади, бюджет или предпочтительные районы). Такая информация позволяет системе не только идентифицировать клиентов, но и делать выборки и анализировать данные, повышая качество обслуживания и обеспечивая персонализированный подход.

2. **Таблица `Apartments`**. Таблица `Apartments` содержит данные о квартирах, которые доступны для аренды через агентство. Каждая квартира представлена уникальным идентификатором (`apartment_id`), а также набором характеристик, таких как адрес, количество комнат, общая площадь, цена аренды и статус доступности. В таблице также могут быть поля для указания таких особенностей, как этаж, наличие мебели, состояние ремонта, вид из окон и доступность инфраструктуры, что позволяет гибко и точно подбирать объекты для клиентов. Таблица регулярно обновляется сотрудниками агентства для отслеживания текущего состояния каждой квартиры, чтобы клиентам всегда предоставлялась актуальная информация.

3. **Таблица `Employees`**. В этой таблице хранится информация о сотрудниках агентства, которые играют важную роль в обеспечении процесса аренды. Каждый сотрудник имеет уникальный идентификатор (`employee_id`), а также личные данные, такие как имя, фамилия и должность. Должностное положение сотрудника может определять его обязанности и права доступа к определенным данным. Таблица также может включать данные о дате найма сотрудника и его контактные данные. Это помогает не только в управлении персоналом, но и в распределении обязанностей между сотрудниками, что делает работу агентства более организованной и эффективной.

4. **Таблица `Rentals`**. Таблица `Rentals` связывает клиентов с квартирами, которые они арендуют, а также указывает ответственного сотрудника. В таблице содержится уникальный идентификатор аренды (`rental_id`), даты начала и окончания аренды, стоимость аренды, а также ссылки на таблицы клиентов, квартир и сотрудников через внешние ключи `client_id`, `apartment_id` и `employee_id`. Таблица позволяет регистрировать сделки и хранить всю информацию о каждой аренде, в том числе условия договора, статус аренды (активен, завершен или аннулирован), что помогает отслеживать и управлять арендными операциями.

#### Важные связи между таблицами:

- **Связь между таблицами `Clients` и `Rentals`**. Один клиент может арендовать несколько квартир, что создает отношение «один ко многим» между таблицами `Clients` и `Rentals`. В таблице `Rentals` для каждой сделки хранится внешний ключ `client_id`, указывающий на клиента в `Clients`. Это позволяет агентству вести полную историю арендных сделок для каждого клиента, что улучшает клиентский сервис и облегчает анализ данных о клиентах.

- **Связь между таблицами `Apartments` и `Rentals`**. Каждая квартира может быть сдана в аренду разным клиентам последовательно, что создает отношение «один ко многим» между `Apartments` и `Rentals`. В таблице `Rentals` хранится внешний ключ `apartment_id`, который ссылается на таблицу `Apartments`. Эта связь помогает вести учет занятости квартир, контролировать доступность и поддерживать историю арендных сделок для каждого объекта недвижимости.

- **Связь между таблицами `Employees` и `Rentals`**. Один сотрудник агентства может вести несколько арендных сделок, поэтому между `Employees` и `Rentals` существует отношение «один ко многим». В таблице `Rentals` внешний ключ `employee_id` ссылается на сотрудника в таблице `Employees`. Это позволяет агентству распределять сделки между сотрудниками, контролировать нагрузку и эффективно управлять процессами аренды.

## 4. Физическая структура базы данных в PostgreSQL

Физическая структура базы данных в PostgreSQL описывает, как именно данные будут храниться, какие типы данных будут использованы, а также методы организации данных для повышения производительности и надежности.

1. **Типы данных**:
   - В PostgreSQL используется тип `VARCHAR` для хранения строковых данных, таких как имена, фамилии и адреса. Например, поле `first_name` в таблице `Clients` может иметь тип `VARCHAR(50)`, что позволяет хранить до 50 символов.
   - Для уникальных идентификаторов (например, `client_id`, `apartment_id`, `employee_id`) используется тип `SERIAL`, который автоматически генерирует уникальные целочисленные значения с автоинкрементом для каждой новой записи.
   - Тип `BOOLEAN` используется для хранения значений, которые могут быть либо истинными, либо ложными, например, поле `available` в таблице `Apartments` указывает на доступность квартиры.
   - Для хранения даты начала и окончания аренды в таблице `Rentals` используется тип `DATE`, что обеспечивает точное хранение даты без указания времени.

2. **Индексы**:
   - При создании таблиц с первичными ключами PostgreSQL автоматически создает индексы для этих ключей, что ускоряет операции поиска и связывания данных. Индексация первичных ключей повышает производительность при обращении к данным.
   - PostgreSQL также автоматически создает индексы для внешних ключей, что ускоряет объединение данных при выполнении запросов, например, в случае внешних ключей `client_id`, `apartment_id` и `employee_id` в таблице `Rentals`.

3. **Хранение данных**:
   - Данные в PostgreSQL хранятся в виде файлов, организованных в виде **сегментов** или **таблиц**, которые объединены в **табличные пространства**. Каждая таблица или индекс имеет свои сегменты, которые распределяются по файловой системе, обеспечивая эффективное управление данными и быстрый доступ к ним. Сегментация данных позволяет PostgreSQL работать с большими объемами информации.

Таким образом, физическая структура базы данных в PostgreSQL включает использование типов данных, индексов и механизмов хранения для повышения производительности, защиты данных и удобства их использования.

## 5. Реализация проекта в среде конкретной СУБД

Для реализации проекта выбрана **PostgreSQL** . Реализация включает создание таблиц, установление связей между ними и настройку индексов для улучшения производительности. PostgreSQL также поддерживает сложные запросы и транзакции, что делает её оптимальным выбором для управления данными аренды недвижимости.


---

### 5.1. Создание таблиц

Для начала создадим необходимые таблицы для хранения информации о клиентах, квартирах, сотрудниках и договорах аренды. Пример SQL-запросов:

```sql
-- Создание таблицы клиентов
CREATE TABLE Clients (
    client_id SERIAL PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(15)
);

-- Создание таблицы квартир
CREATE TABLE Apartments (
    apartment_id SERIAL PRIMARY KEY,
    address VARCHAR(255) NOT NULL,
    number_of_rooms INT,
    area INT,
    price INT NOT NULL,
    available BOOLEAN DEFAULT TRUE
);

-- Создание таблицы сотрудников
CREATE TABLE Employees (
    employee_id SERIAL PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    position VARCHAR(50)
);

-- Создание таблицы аренды
CREATE TABLE Rentals (
    rental_id SERIAL PRIMARY KEY,
    client_id INT,
    apartment_id INT,
    employee_id INT,
    start_date DATE,
    end_date DATE,
    rental_price INT,
    FOREIGN KEY (client_id) REFERENCES Clients(client_id),
    FOREIGN KEY (apartment_id) REFERENCES Apartments(apartment_id),
    FOREIGN KEY (employee_id) REFERENCES Employees(employee_id)
);
```

Каждая из этих таблиц имеет свои атрибуты:

Clients — информация о клиентах, включая имя, фамилию, email и телефон.

Apartments — данные о квартирах, такие как адрес, количество комнат, площадь и стоимость аренды.

Employees — данные о сотрудниках агентства, их должности и имена.

Rentals — данные о заключенных договорах аренды, ссылаются на клиента, квартиру и сотрудника, который оформил аренду.


### 5.2. SQL-запросы PostgreSQL для базы данных агентства аренды квартир
Запросы к базе данных агентства аренды квартир играют важнейшую роль в управлении всеми аспектами работы агентства, включая организацию, обработку и анализ данных. Благодаря SQL-запросам сотрудники агентства могут выполнять широкий спектр задач, от добавления новой информации до её обновления, удаления и комплексного анализа. Эти запросы не только обеспечивают упорядоченное хранение информации, но и помогают автоматизировать рутинные операции, что значительно упрощает работу и позволяет сосредоточиться на более важных задачах.

Используя SQL-запросы, можно решать такие задачи, как управление данными о клиентах, квартирах, сотрудниках и сделках по аренде. Запросы позволяют добавлять новых клиентов и сотрудников, обновлять данные о квартирах и договорах аренды, а также эффективно удалять устаревшую информацию. В результате работы с такими запросами можно легко поддерживать актуальность и точность данных, что особенно важно для своевременного обслуживания клиентов и качественного управления объектами недвижимости. Запросы также позволяют сотрудникам агентства получать актуальные данные для анализа, например, данные о доступных квартирах, завершенных арендах, общей выручке и статистике по аренде, что помогает в принятии обоснованных решений.

Помимо этого, SQL-запросы обеспечивают высокий уровень контроля над данными, позволяя обновлять или удалять устаревшие записи, такие как истекшие договора аренды или неактуальные контактные данные клиентов. Это помогает поддерживать порядок в базе данных, повышает эффективность работы агентства и способствует поддержанию высокого уровня обслуживания клиентов. Также запросы обеспечивают быстрый доступ к важным данным, что позволяет оперативно принимать управленческие решения. Например, с помощью таких запросов можно быстро находить подходящие квартиры, отслеживать их занятость, устанавливать цены и анализировать текущие рыночные тенденции, что дает агентству конкурентные преимущества на рынке.

В конечном итоге, SQL-запросы не только автоматизируют управление базой данных, но и поддерживают высокую эффективность работы агентства. Они обеспечивают быстрый доступ к важной информации, минимизируют ручной труд, позволяют вести аналитический учет и упрощают обслуживание клиентов, что в совокупности повышает качество предоставляемых услуг. Такие запросы служат важным инструментом для мониторинга и анализа данных, помогая агентству адаптироваться к изменениям рынка, разрабатывать более точные стратегии и обеспечивать долгосрочный успех.


```sql
-- 1. Добавление нового клиента
INSERT INTO Clients (first_name, last_name, email, phone)
VALUES ('Анна', 'Смирнова', 'anna.smirnova@example.com', '+79123456789');

-- 2. Добавление новой квартиры
INSERT INTO Apartments (address, number_of_rooms, area, price, available)
VALUES ('ул. Пушкина, д. 10', 2, 55, 30000, TRUE);

-- 3. Добавление нового сотрудника
INSERT INTO Employees (first_name, last_name, position)
VALUES ('Сергей', 'Иванов', 'Менеджер');

-- 4. Создание новой записи об аренде
INSERT INTO Rentals (client_id, apartment_id, employee_id, start_date, end_date, rental_price)
VALUES (1, 2, 1, '2024-11-01', '2025-11-01', 30000);

-- 5. Обновление информации о клиенте
UPDATE Clients SET email = 'new_email@example.com' WHERE client_id = 1;

-- 6. Обновление стоимости аренды квартиры
UPDATE Apartments SET price = 35000 WHERE apartment_id = 2;

-- 7. Удаление записи о клиенте
DELETE FROM Clients WHERE client_id = 5;

-- 8. Удаление записи о квартире
DELETE FROM Apartments WHERE apartment_id = 3;

-- 9. Поиск всех квартир с ценой аренды ниже 30000
SELECT * FROM Apartments WHERE price < 30000;

-- 10. Поиск всех клиентов с указанием email
SELECT * FROM Clients WHERE email IS NOT NULL;

-- 11. Получение всех доступных квартир
SELECT * FROM Apartments WHERE available = TRUE;

-- 12. Поиск клиентов, арендующих квартиры через определенного менеджера
SELECT c.first_name, c.last_name FROM Rentals r
JOIN Clients c ON r.client_id = c.client_id
WHERE r.employee_id = 1;

-- 13. Изменение доступности квартиры
UPDATE Apartments SET available = FALSE WHERE apartment_id = 1;

-- 14. Получение списка всех квартир по убыванию цены
SELECT * FROM Apartments ORDER BY price DESC;

-- 15. Подсчет общего количества клиентов
SELECT COUNT(*) FROM Clients;

-- 16. Подсчет количества занятых квартир
SELECT COUNT(*) FROM Apartments WHERE available = FALSE;

-- 17. Суммарная выручка от всех договоров аренды
SELECT SUM(rental_price) FROM Rentals;

-- 18. Средняя стоимость аренды квартир
SELECT AVG(price) FROM Apartments;

-- 19. Вывод всех договоров аренды, заканчивающихся в текущем месяце
SELECT * FROM Rentals WHERE end_date BETWEEN '2024-11-01' AND '2024-11-30';

-- 20. Обновление должности сотрудника
UPDATE Employees SET position = 'Старший менеджер' WHERE employee_id = 1;

-- 21. Поиск квартир с площадью более 70 кв.м
SELECT * FROM Apartments WHERE area > 70;

-- 22. Поиск всех сотрудников с должностью "Менеджер"
SELECT * FROM Employees WHERE position = 'Менеджер';

-- 23. Удаление всех договоров аренды, срок которых истек
DELETE FROM Rentals WHERE end_date < CURRENT_DATE;

-- 24. Установка скидки на аренду для конкретной квартиры
UPDATE Apartments SET price = price * 0.9 WHERE apartment_id = 2;

-- 25. Получение списка всех клиентов с сортировкой по фамилии
SELECT * FROM Clients ORDER BY last_name;

-- 26. Сотрудники, имеющих хотя бы 1 договор
SELECT DISTINCT e.first_name, e.last_name
FROM Employees e
JOIN Rentals r ON e.employee_id = r.employee_id
WHERE r.end_date >= CURRENT_DATE;

-- 27. Изменение номера телефона клиента
UPDATE Clients SET phone = '+79111234567' WHERE client_id = 1;

-- 28. Добавление нового договора аренды с текущей датой начала
INSERT INTO Rentals (client_id, apartment_id, employee_id, start_date, end_date, rental_price)
VALUES (2, 3, 1, CURRENT_DATE, '2025-11-01', 40000);

-- 29. Подсчет количества договоров аренды по каждому клиенту
SELECT client_id, COUNT(*) AS rental_count
FROM Rentals
GROUP BY client_id;

-- 30. Поиск всех сотрудников, связанных с определенными договорами аренды
SELECT DISTINCT e.first_name, e.last_name FROM Employees e
JOIN Rentals r ON e.employee_id = r.employee_id;
```

# Заключение
В результате выполнения данной курсовой работы была разработана и внедрена база данных для агентства по аренде квартир, представляющая собой целостную систему для хранения и обработки данных, связанных с управлением аренды. Работа включала детальное исследование предметной области: были выявлены ключевые объекты (клиенты, квартиры, сотрудники и аренда), определены их атрибуты и связи. На основе этого анализа построена концептуальная модель данных, которая легла в основу дальнейшего проектирования и разработки базы данных. 

Проект был реализован с использованием системы управления базами данных PostgreSQL, что позволило создать надежную структуру хранения и обеспечить удобный доступ к информации. Спроектированная база данных включает разделы для управления информацией о клиентах, квартирах, условиях аренды, а также данных о сотрудниках. Это решение позволяет агентству эффективно автоматизировать ряд основных бизнес-процессов, включая регистрацию клиентов, отслеживание доступных квартир, организацию процессов аренды и ведение историй аренды.

Кроме того, при помощи базы данных решена задача обработки запросов от клиентов и сотрудников, что упрощает взаимодействие между всеми участниками процесса и способствует повышению уровня сервиса. С помощью SQL-запросов были разработаны и протестированы различные отчеты и аналитические выборки, что позволило наглядно продемонстрировать возможности системы по генерации статистических и аналитических данных. Эти функции обеспечивают агентству не только повышение операционной эффективности и контроль процессов, но и открывают новые возможности для анализа данных, который способствует стратегическому развитию бизнеса и улучшению его управляемости.


 # Список использованных источников

 Корбут А.А. Основы проектирования баз данных. Учебное пособие. — М.: Издательство МГТУ, 2020. 
 
 Официальная документация PostgreSQL. https://www.postgresql.org/docs/





